{
    "contents" : "\n\nlibrary(lubridate)\n# library(dplyr)\nlibrary(maptools)\n# Load 'rgdal' package, which is used to read/write shapefiles and rasters\nlibrary(rgdal)\nsource(\"C:/Users/CaracterizaciónD/Documents/GitHub/pacoche/code/TEAM_code.R\")\n# source(\"C:/Users/Diego/Documents/CodigoR/ULEAM/Infor_Caract/code/calendar.R\")\nload(file = \"data/machalilla_fixed.RData\")\n\n\n\n#machalilla.fixed<-read.csv(\"C:/Users/Diego/Documents/CodigoR/Machalilla_paper/data/machalilla_fixed.csv\") \n\n#machalilla.fixed$photo_date2<-as.Date(as.character(machalilla.fixed$camera_trap_start_date),  \"%Y-%m-%d\")\n#machalilla.fixed$Sampling.Period<-as.numeric(machalilla.fixed$Sampling.Period)\n#machalilla.fixed$binomial<-as.character(machalilla.fixed$binomial)\n#machalilla.fixed$year<-as.numeric(machalilla.fixed$year)\n#machalilla.fixed$month<-as.numeric(machalilla.fixed$month)\n\n#machalilla.fixed$camera_trap_start_date<-as.Date(as.character(machalilla.fixed$camera_trap_start_date),  \"%Y-%m-%d\")\n#machalilla.fixed$camera_trap_end_date<-as.Date(as.character(machalilla.fixed$camera_trap_end_date),  \"%Y-%m-%d\")\n\n\n# library(dplyr)\nmat.per.sp<-f.matrix.creator2(data = machalilla.fixed,year = 2014)\nsp.names<-names(mat.per.sp) # species names\n\n# counting how many (total) records per species by all days\ncont.per.sp<-data.frame(row.names = sp.names)\nrow.per.sp<-as.data.frame(matrix(nrow = length(sp.names), ncol=c(60)))\ncol.per.sp<-as.data.frame(matrix(nrow = length(sp.names), ncol=c(161)))\nrownames(row.per.sp)<-sp.names\nrownames(col.per.sp)<-sp.names\n\nfor (i in 1:length(mat.per.sp)){\n  cont.per.sp[i,1]<-sum(apply(as.data.frame(mat.per.sp [[i]]),FUN=sum,na.rm=T, MARGIN = 1))\n  \n  row.per.sp[i,]<-apply(mat.per.sp[[i]],1, function(x) sum(x, na.rm=T))\n  # row.per.sp[i,which(row.per.sp[i,]>0)]<-1 # convert to presence absence  1 and 0\n  \n  col.per.sp[i,]<-apply(mat.per.sp[[i]],2, function(x) sum(x, na.rm=T))\n  # col.per.sp[i,which(col.per.sp[i,]>0)]<-1 # convert to presence absence  1 and 0\n  \n}\n\n\n#### se full mat\nrow.per.sp\n\n# colnames(row.per.sp)<-rep\n# cont.per.sp$especie<-rownames(cont.per.sp)\n# colnames(cont.per.sp)<-c(\"Numero_de_fotos\",\"especie\")\n\n##################################################\n### Just wild mammals not including domesticated\n##################################################\n\n# Chk names in sp.names Myotis myotis should be Artibeus sp\nrow.per.sp<-row.per.sp[-37,] # elimina Pheucticus chrysogaster\nrow.per.sp<-row.per.sp[-36,] # elimina Cathartes aura\nrow.per.sp<-row.per.sp[-35,] # elimina Gallus gallus\nrow.per.sp<-row.per.sp[-34,] # elimina Zenaida auriculata\nrow.per.sp<-row.per.sp[-33,] # elimina Momotus momota\n\nrow.per.sp<-row.per.sp[-30,] # elimina Heliomaster longirostris \nrow.per.sp<-row.per.sp[-29,] # elimina Pipistrellus pipistrellus \nrow.per.sp<-row.per.sp[-26,] # elimina Ortalis vetula \nrow.per.sp<-row.per.sp[-25,] # elimina Homo sapiens\nrow.per.sp<-row.per.sp[-21,] # elimina Tinamus major \n\nrow.per.sp<-row.per.sp[-16,] # elimina Equus africanus\nrow.per.sp<-row.per.sp[-15,] # elimina Sus scrofa\nrow.per.sp<-row.per.sp[-14,] # elimina Rattus rattus\nrow.per.sp<-row.per.sp[-12,] # elimina Equus ferus\nrow.per.sp<-row.per.sp[-10,] # elimina Bos primigenius\n\nrow.per.sp<-row.per.sp[-07,] # elimina Buteogallus urubitinga\nrow.per.sp<-row.per.sp[-04,] # elimina Leptotila verreauxi\n\nrow.per.sp<-row.per.sp[-03,] # elimina Capra aegagrus\nrow.per.sp<-row.per.sp[-02,] # elimina Canis lupus\n\nrow.per.sp<-row.per.sp[-01,] # elimina 1a sp\n# row.per.sp<-row.per.sp[-10,] # elimina Leptotila verreauxi\n# row.per.sp<-row.per.sp[-08,] # elimina Tinamus major\n# row.per.sp<-row.per.sp[-01,] # elimina 1era especie vacia\n\n\n######### CHK names\nrownames(row.per.sp)\n\n\n# Numero de especies observadas\nlength(row.per.sp[,1])\n\n############################################################\n## first Table \n############################################################\nlibrary(knitr)\npresence<-row.per.sp\npresence[presence > 0]<-1 # replace to 1\nnaiveoccu<-apply(X = presence,FUN = sum, MARGIN = 1 ) / 55 #divided number of sites\nevents<-apply(X = row.per.sp ,FUN = sum, MARGIN = 1 )\nRAI<-(events/(37.8 * 55)) * 100 #37.8 is average sampling effort, in days per camera\nTable1<-cbind(events, RAI, naiveoccu)\nkable(Table1, format = \"rst\")\n\n############################################################\n## Distribucion posterior de la riqueza de especies\n############################################################\n\n# Riqueza de especies y acumulación, modelando la ocurrencia y la detectabilidad. \n# Este análisis sigue el método de Dorazio et al. (2006).\n\nsource(\"C:/Users/CaracterizaciónD/Documents/GitHub/pacoche/code/MultiSpeciesSiteOcc.R\")\n\nX1 = as.matrix(row.per.sp) # col.per.sp por dias y row.per.sp por sitios (camaras)\nnrepls = 130 #dias \nespecies = MultiSpeciesSiteOcc(nrepls, X1)\n\n# summary(especies$fit$sims.matrix)\n\nalpha.post = especies$fit$sims.matrix[,\"alpha\"]\nsigmaU.post = especies$fit$sims.matrix[,\"sigma.u\"]\nN.post = especies$fit$sims.matrix[,\"N\"]\n\nnsites = 60 \ncum_sp<-CumNumSpeciesPresent(nsites, alpha.post, sigmaU.post, N.post)\n\n#histogram of posteriors\nhist(especies$fit$sims.matrix[,\"N\"],breaks = c(16:30), xlab=\"Number of mammal species\", ylab=\"Relative frecuency\", main=\"\")\nabline(v=length(row.per.sp[,1]),col=\"blue\", lty = 2) # -> lines.histogram(*) observadas\nabline(v=median(especies$fit$sims.matrix[,\"N\"]),col=\"red\", lty = 2) # -> esperadas por detectabilidad\n\n\nmean(especies$fit$sims.matrix[,\"N\"])\nmedian(especies$fit$sims.matrix[,\"N\"])\n\n#####################\n#### compare to vegan\n#####################\nlibrary(vegan)\nsac <- specaccum(t(row.per.sp))\nplot(sac)\n\nsp1 <- specaccum(t(row.per.sp), method = \"random\")\nsp2 <- specaccum(t(row.per.sp),  method = \"rarefaction\")\nsp3 <- specaccum(t(row.per.sp),  method = \"collector\")\n\nsummary(sp1)\nplot(sp1, ci.type=\"poly\", col=\"blue\", lwd=2, ci.lty=0, ci.col=\"lightblue\")\nboxplot(sp1, col=\"yellow\", add=TRUE, pch=\"+\")\n\nplot(sp2, ci.type=\"poly\", col=\"blue\", lwd=2, ci.lty=0, ci.col=\"lightblue\") # rarefaction\n#plot(sp2)\n# boxplot(sp1, col=\"yellow\", add=TRUE, pch=\"+\")\n\nplot(sp3, ci.type=\"poly\", col=\"blue\", lwd=2, ci.lty=0, ci.col=\"lightblue\")\n#plot(sp2)\n\nH <- diversity(t(row.per.sp))\nsimp <- diversity(t(row.per.sp), \"simpson\")\ninvsimp <- diversity(t(row.per.sp), \"inv\")\nr.2 <- rarefy(t(row.per.sp), 2)\nalpha <- fisher.alpha(t(row.per.sp))\npairs(cbind(H, simp, invsimp, r.2, alpha), pch=\"+\", col=\"blue\")\n\n## Species richness (S) and Pielou's evenness (J):\nS <- specnumber(t(row.per.sp)) ## rowSums(BCI > 0) does the same...\nJ <- H/log(S)\n\nrarecurve(row.per.sp)#,step = 20, sample = raremax)\n## Rarefaction\n(raremax <- max(rowSums(row.per.sp)))\nSrare <- rarefy(t(row.per.sp), raremax)\nplot(S, Srare, xlab = \"Observed No. of Species\", ylab = \"Rarefied No. of Species\")\nabline(0, 1)\nrarecurve(row.per.sp)#, step = 2, sample = raremax, col = \"blue\", cex = 0.6)\n\n\n\n# filter mat.per.sp to sp of wild mammals\nmammal.per.sp<- mat.per.sp[-c(37,36,35,34,33,30,29,26,25,21,16,15,14,12,10,7,4,3,2,1)]\nfull.mammal<-ldply(mammal.per.sp, data.frame)\n\nsp.abund.count<-col.per.sp[-c(37,36,35,34,33,30,29,26,25,21,16,15,14,12,10,7,4,3,2,1),]\n\n# \n# # convert list of species to unmarked \n# # fullmat2<-f.convert.to.unmarked(mammal.per.sp[2])\n# spcies<-as.data.frame( full.mammal[,1])\n# colnames(spcies)<-\"sp\"\n# obs<-as.data.frame(full.mammal[,2:162])\n# \n# #  covariates of detection and occupancy in that order.\n# fullmat<-unmarkedFrameOccu(y=obs,siteCovs=spcies)\n# \n# fm0 <- occu(~ 1 ~ 1, fullmat) \n# fm1 <- occu(~ 1 ~ sp, fullmat)\n# fm2 <- occu(~ sp ~ 1, fullmat)\n# fm3 <- occu(~ sp ~ sp, fullmat)\n# \n# \n# models <- fitList(\n#   'p(.)psi(.)' = fm0,\n#   'p(.)psi(sp)' = fm1,\n#   'p(sp)psi(.)' = fm2,\n#   'p(sp)psi(sp)' = fm3)\n# \n# ms <- modSel(models)\n# ############### someting weird in number of parameters compared to Rovero\n\nobs2<-row.per.sp #sp.abund.count\nspcies2<-as.data.frame(rownames(row.per.sp)) #sp.abund.count\ncolnames(spcies2)<-\"sp\"\n\n\nspcies2$guild<-c(\"Insectivore\", \"Carnivore\", \"Hervibivore\",\n                 \"Carnivore\",  \"Hervibivore\", \"Hervibivore\",\n                 \"Carnivore\", \"Carnivore\", \"Hervibivore\",\n                 \"Onmivore\", \"Insectivore\", \"Hervibivore\",\n                 \"Carnivore\", \"Hervibivore\", \"Carnivore\",\n                 \"Onmivore\", \"Insectivore\")\nspcies2$mass<-c(4209, 3910, 55508, 3249, 949, 8000, 11900,\n                6750, 2674, 21266, 4203, 433, 6950, 22800,\n                4030, 1091, 42)\nhabitat<-c(\"dry\",\"humid\",\"dry\",\"humid\",\"dry\",\n           \"dry\",\"dry\",\"dry\",\"dry\",\"dry\",\n           \"dry\", \"humid\", \"humid\", \"transition\", \"humid\",\n           \"transition\", \"humid\",  \"transition\", \"humid\",\n           \"humid\", \"dry\", \"dry\", \"dry\", \"dry\", \"humid\",\n           \"dry\", \"humid\", \"dry\", \"dry\", \"dry\", \"dry\", \"humid\",\n           \"dry\", \"transition\", \"dry\", \"transition\", \"dry\", \"dry\",\n           \"dry\", \"dry\", \"dry\", \"dry\", \"dry\", \"dry\", \"transition\",\n           \"dry\", \"transition\", \"dry\", \"dry\",  \"dry\", \"dry\", \"transition\",\n           \"dry\", \"transition\",  \"dry\", \"dry\", \"transition\", \"transition\",\n           \"humid\", \"dry\")\n\nhabitat2<-matrix(rep(habitat, 17), nrow = 17, ncol = 60, byrow = TRUE)\n\nlibrary(unmarked)\nfullmat2<-unmarkedFrameOccu(y=obs2,siteCovs=spcies2)\n\n#covariates of detection and occupancy in that order.\nfm0 <- occu(~ 1 ~ 1, fullmat2) \nfm1 <- occu(~ 1 ~ guild, fullmat2)\nfm2 <- occu(~ guild ~ 1, fullmat2)\nfm3 <- occu(~ guild ~ guild, fullmat2)\nfm4 <- occu(~ mass~ 1, fullmat2)\nfm5 <- occu(~ mass ~ guild, fullmat2)\nfm6 <- occu(~ mass + guild ~ 1, fullmat2)\nfm7 <- occu(~ sp ~ guild, fullmat2)\n\nmodels1 <- fitList(\n  'p(.)psi(.)' = fm0,\n  'p(.)psi(guild)' = fm1,\n  'p(guild)psi(.)' = fm2,\n  'p(guild)psi(guild)' = fm3,\n  'p(mass)psi(.)' = fm4,\n  'p(mass)psi(guild)' = fm5,\n  'p(mass, guild)psi(.)' = fm6,\n  'p(sp)psi(guild)' = fm7)\n\nms1 <- modSel(models1)\n\n\n##############################\n\nobs3<-t(row.per.sp) #sp.abund.count\nspecies3<-(rownames(row.per.sp)) #sp.abund.count\n# (spcies2)<-\"sp\"\nspecies.obs<-matrix(rep(species3,60), # the data elements \n     nrow=60,              # number of rows \n     ncol=17,              # number of columns \n     byrow = TRUE)        # fill matrix by rows\n\n\nguild<-c(\"Insectivore\", \"Carnivore\", \"Hervibivore\",\n                 \"Carnivore\",  \"Hervibivore\", \"Hervibivore\",\n                 \"Carnivore\", \"Carnivore\", \"Hervibivore\",\n                 \"Onmivore\", \"Insectivore\", \"Hervibivore\",\n                 \"Carnivore\", \"Hervibivore\", \"Carnivore\",\n                 \"Onmivore\", \"Hervibivore\")\nguild.obs<-matrix(rep(guild,60), # the data elements \n                    nrow=60,              # number of rows \n                    ncol=17,              # number of columns \n                    byrow = TRUE)\n\nmass<-c(4209, 3910, 55508, 3249, 949, 8000, 11900,\n                6750, 2674, 21266, 4203, 433, 6950, 22800,\n                4030, 1091, 42)\nmass.obs<-matrix(rep(mass,60), # the data elements \n                  nrow=60,              # number of rows \n                  ncol=17,              # number of columns \n                  byrow = TRUE)\n\nhabitat3<-c(\"dry\",\"humid\",\"dry\",\"humid\",\"dry\",\n           \"dry\",\"dry\",\"dry\",\"dry\",\"dry\",\n           \"dry\", \"humid\", \"humid\", \"transition\", \"humid\",\n           \"transition\", \"humid\",  \"transition\", \"humid\",\n           \"humid\", \"dry\", \"dry\", \"dry\", \"dry\", \"humid\",\n           \"dry\", \"humid\", \"dry\", \"dry\", \"dry\", \"dry\", \"humid\",\n           \"dry\", \"transition\", \"dry\", \"transition\", \"dry\", \"dry\",\n           \"dry\", \"dry\", \"dry\", \"dry\", \"dry\", \"dry\", \"transition\",\n           \"dry\", \"transition\", \"dry\", \"dry\",  \"dry\", \"dry\", \"transition\",\n           \"dry\", \"transition\",  \"dry\", \"dry\", \"transition\", \"transition\",\n           \"humid\", \"dry\")\n\n\nobs.covs <- list(\n  sp=species.obs,\n  guild= guild.obs,\n  mass= mass.obs)\n\n\nfullmat3<-unmarkedFrameOccu(y=obs3, \n                            siteCovs=as.data.frame(habitat3), \n                            obsCovs=obs.covs)\n\n#covariates of detection and occupancy in that order.\nfm0 <- occu(~ 1 ~ 1, fullmat3) \nfm1 <- occu(~ guild ~ 1, fullmat3)\nfm2 <- occu(~ mass ~ 1, fullmat3)\nfm3 <- occu(~ guild + mass ~ 1, fullmat3)\nfm4 <- occu(~ 1~ habitat3, fullmat3)\nfm5 <- occu(~ guild ~ habitat3, fullmat3)\nfm6 <- occu(~ mass ~ habitat3, fullmat3)\nfm7 <- occu(~ guild + mass ~ habitat3, fullmat3)\nfm8 <- occu(~ habitat3 ~ habitat3, fullmat3)\nfm9 <- occu(~ sp ~ habitat3, fullmat3)\n\n\n\nmodels2 <- fitList(\n  'p(.)psi(.)' = fm0,\n  'p(guild)psi(.)' = fm1,\n  'p(mass)psi(.)' = fm2,\n  'p(guild, mass)psi(.)' = fm3,\n  'p(.)psi(habitat)' = fm4,\n  'p(guild)psi(habitat)' = fm5,\n  'p(mass)psi(habitat)' = fm6,\n  'p(guild, mass)psi(habitat)' = fm7,\n  'p(habitat)psi(habitat)' = fm8,\n  'p(sp)psi(habitat)' = fm9)  \n\nms2 <- modSel(models2)\n\n\n###############################################\n##### Mammal tree for pyloenetic diversity\n##### \n##### tree from: \n##### Fritz, S. A., Bininda-Emonds, O. R. P. & Purvis, A. \n##### 2009 Geographical variation in predictors of mammalian \n##### extinction risk: big is bad, but only in the tropics. \n##### Ecol. Lett. 12, 538–49. (doi:10.1111/j.1461-0248.2009.01307.x)\n###############################################\n\nlibrary(picante)\n\nfullcomm<-(as.matrix(t(row.per.sp)))\nspname_rayita<-sub( \" \", \"_\", colnames(fullcomm))\n#### fix Puma yagouaroundi and Myotis \nspname_rayita[8]<-\"Puma_concolor\"\nspname_rayita[17]<-\"Artibeus_jamaicensis\"\n\ncolnames(fullcomm)<-spname_rayita\n\nmammal.tree<-read.nexus(\"data/MammalTree_nexus2.txt\")\nprunedphy <- prune.sample(fullcomm, mammal.tree[[1]])\n\n# prunedphy\nplot(prunedphy)\n\n#############################\n# community by forest type\n# cam.habitat<-read.csv(\"data/cam_habitat.csv\", header = T)\nabun.sp<-as.data.frame(obs3)\nabun.sp$habitat<-habitat3\n\nhumid.cam<-dplyr::filter(abun.sp, habitat3==\"humid\")\nhumid.com<-apply(humid.cam[,1:17],2,sum)\n\ntransition.cam<-dplyr::filter(abun.sp, habitat3==\"transition\")\ntransition.com<-apply(transition.cam[,1:17],2,sum)\n\ndry.cam<-dplyr::filter(abun.sp, habitat3==\"dry\")\ndry.com<-apply(dry.cam[,1:17],2,sum)\n\ncommuni<-matrix(\n          c(humid.com, transition.com, dry.com),\n          nrow=3,              # number of rows \n          ncol=17,              # number of columns \n          byrow = TRUE)\n\ncolnames(communi)<-spname_rayita\nrownames(communi)<-c(\"humid\", \"transition\", \"dry\")\n\n\n\n#############################\n# traits mass guild\n\nsp.traits<-cbind(guild, mass)\nrownames(sp.traits)<-spname_rayita\n\n\n# see species present in each community\npar(mfrow = c(1, 3))\n  for (i in row.names(communi)) {\n  plot(prunedphy, show.tip.label = FALSE, main = i)\n  tiplabels(tip = which(prunedphy$tip.label %in% names(which(communi [i, ] > 0))) , pch=19, cex=2)\n  }\n\n\npd.result <- pd(communi, mammal.tree[[1]], include.root=TRUE)\npd.result\n\nphydist <- cophenetic(mammal.tree[[1]]) #Cophenetic Distances for mammal Clustering\nses.mpd.result <- ses.mpd(communi, phydist, null.model=\"taxa.labels\", abundance.weighted=TRUE, runs = 1000) #pairwise distances in communities\nses.mpd.result\n\nses.mntd.result <- ses.mntd(communi, phydist, null.model=\"taxa.labels\", abundance.weighted=TRUE, runs = 1000) #pairwise distances in communities\nses.mntd.result\n                          \n\n############################################\n### Geographic covariates\n############################################\n\nlibrary(raster)\nlibrary(rgdal)\n# library(dismo)\n# library(biomod2)\nlibrary(spatstat)\nlibrary(sp)\nlibrary(dplyr)\nlibrary(maptools)\n\n\nlong<-unique(machalilla.fixed$longitude)\nlati<-unique(machalilla.fixed$latitude)\ncentercoord<-c(mean(subset(long, long<=1)),mean(unique(subset(lati, lati<=1))))\ncoordsubset<-subset(machalilla.fixed,select = c(camera_trap,longitude,latitude,first_name_set_camera))\n\n#################################\n# get elevation\n################################\n\n# elevation<-getData('SRTM',lon=centercoord[1], lat=centercoord[2])\n\n# read elevation from disk\nelevation<- raster(\"C://Users//Diego//Documents//CodigoR//ULEAM//Infor_Caract//code//srtm_20_13.tif\")\n\nelevation2 <- readGDAL(\"C://Users//Diego//Documents//CodigoR//ULEAM//Infor_Caract//code//srtm_20_13.tif\")\nimage(elevation, col= grey(1:99/100), axes=TRUE)\nelevation<-raster(elevation2)\n\n\ncam.cords<-as.data.frame(distinct(coordsubset))\ncoordinates(cam.cords) <- ~longitude+latitude #make sppatial data fram\ngeo <- CRS(\"+proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0\") #def cord\nproj4string(cam.cords)<-geo # set cords\n\ne<-extent (-80.9, -80.5, -1.75,-1.35)\nelevation.crop<-crop(elevation, e)\n\ne = extent(raster(xmn = -80.9, xmx = -80.5, ymn = -1.75, ymx = -1.35))\ncr1 = crop(elevation, e)\n\n\n\n# plot(elevation.crop)\n# plot(cam.cords, add=T, col=\"red\")\n# title(main=\"Altitud\", sub=\"en color rojo se muestra donde se instalaron las camaras\")\n\nslope<-terrain(elevation.crop, opt='slope', unit='degrees', neighbors=4)\n# plot(slope)\n# plot(cam.cords, add=T, col=\"red\")\n# title(main=\"Pendiente\", sub=\"en color rojo se muestra donde se instalaron las camaras\")\n\ncam.cords.sp<-SpatialPoints(cam.cords)\nproj4string(cam.cords.sp)<-geo \n# etract values\nelev.ovr <- extract(elevation.crop, cam.cords, method='bilinear')\nslope.ovr <- extract(slope, cam.cords, method='bilinear')\n\n# add to table\ncam.cords$elev<-elev.ovr\ncam.cords$slope<-slope.ovr\n\n############################\n# road\n############################\n\nroadpol <- readShapeSpatial(\"C:/Users/Diego/Documents/CodigoR/ULEAM/Infor_Caract/shp/machalilla_roadsclip.shp\")\nnames(roadpol)<-\"dist_rd\"\nproj4string(roadpol)<-geo\ndist_rd<-over(x = cam.cords, y = roadpol)\n# add to table\ncam.cords$dist_rd<-as.numeric(dist_rd[,1])\n\nroadpol.ow<-as(as(roadpol, \"SpatialPolygons\"), \"owin\") # make owin\ncam.and.covs<-as.data.frame(cam.cords)\n\n# plot(roadpol, col=topo.colors(65))\n# plot(cam.cords, add=T, col=\"red\")\n# title(main=\"Distancia a las carreteras\", sub=\"en color rojo se muestra donde se instalaron las camaras\")\n\n\n#####################################################\n## Deforestation\n####################################################\n\ndist.def<-raster(\"C:/Users/Diego/Documents/CodigoR/ULEAM/Infor_Caract/Data/dist_def.tif\")\n\n# plot(dist.def)\n# plot(cam.cords, add=T, col=\"red\")\n# title(main=\"Distancia a Deforestacion\", sub=\"en color rojo se muestra donde se instalaron las camaras\")\n\n# plot(deforestado, col=\"red\", add=T)\n# etract values\ndist.def.ovr <- extract(dist.def, cam.cords, method='bilinear')\nindex<-which(is.na(dist.def.ovr)) # detect NA. Means cam is in deforested\ndist.def.ovr [index]<-0 # camera in distance cero to deforested\n\n\n# add to table\ncam.and.covs$dist_def<-as.numeric(dist.def.ovr)\n\ncam.cords$dist_def<-dist.def.ovr\n# am.and.covs<-as.data.frame(cam.cords)\n\n\n##################################\n## Estructura Veget\n##################################\n\nest.veget<-read.csv(\"C:/Users/Diego/Documents/CodigoR/ULEAM/Infor_Caract/Data/estructVeget.csv\") # read table\n\ncam.and.covs<-cbind(cam.and.covs, est.veget) #Paste covs\n\n\n################################\ncam.and.covs.scaled <-cbind(scale(cam.and.covs[5],center = T,scale = T),\n                            scale(cam.and.covs[6],center = T,scale = T),\n                            scale(cam.and.covs[7],center = T,scale = T),\n                            scale(cam.and.covs[8],center = T,scale = T),\n                            scale(cam.and.covs[10],center = T,scale = T),\n                            scale(cam.and.covs[11],center = T,scale = T),\n                            scale(cam.and.covs[12],center = T,scale = T))\n\n\n\n\n\n",
    "created" : 1438724832711.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1946146241",
    "id" : "A32272FE",
    "lastKnownWriteTime" : 1441401553,
    "path" : "~/GitHub/machalilla/Machalilla_paper/code/machalilla_paper.R",
    "project_path" : "code/machalilla_paper.R",
    "properties" : {
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "type" : "r_source"
}